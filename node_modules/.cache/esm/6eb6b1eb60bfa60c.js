let arg,confirm,exitCodes,promptForMissingOptions,testPath,auditCode,fixCode,showOptions,showHelp,showVersion;_60b‍.x([["cli",()=>cli]]);_60b‍.w("arg",[["default",["arg"],function(v){arg=v}]]);_60b‍.w("@inquirer/confirm",[["default",["confirm"],function(v){confirm=v}]]);_60b‍.w("../Exceptions/exitCodes",[["default",["exitCodes"],function(v){exitCodes=v}]]);_60b‍.w("./promptCLI",[["default",["promptForMissingOptions"],function(v){promptForMissingOptions=v}]]);_60b‍.w("../controller/testPath",[["default",["testPath"],function(v){testPath=v}]]);_60b‍.w("../main",[["auditCode",["auditCode"],function(v){auditCode=v}],["fixCode",["fixCode"],function(v){fixCode=v}]]);_60b‍.w("./informationCLI",[["showOptions",["showOptions"],function(v){showOptions=v}],["showHelp",["showHelp"],function(v){showHelp=v}],["showVersion",["showVersion"],function(v){showVersion=v}]]);/**
 * @file cli contains the main commands to receive the raw arguments, interpret
 * it and then calls to the proper functions given by the user.
 *
 * @author Jose Gracia Berenguer
 * @since 1.0.0
 * @link https://github.com/Josee9988/Implode-CSS
 */

















/**
 * Summary: parseArgumentsIntoOptions receives the raw arguments given by
 * the user and transform them into an object that will be returned.
 *
 * @param {object} rawArgs arguments directly given by the user.
 * @return {object} options as a JavaScript object.
 */
function parseArgumentsIntoOptions(rawArgs) {
    const args = arg({
        '--audit': Boolean,
        '--fix': Boolean,
        '--yes': Boolean,
        '--help': Boolean,
        '--version': Boolean,
        '--port': Number,
        '--ignoreFolders': String,
        '-a': '--audit',
        '-f': '--fix',
        '-y': '--yes',
        '-h': '--help',
        '-v': '--version',
        '-p': '--port',
        '-i': '--ignoreFolders',
    }, {
        argv: rawArgs.slice(2),
    });
    return {
        defaultOptions: args['--yes'] || false,
        audit: args['--audit'] || false,
        fix: args['--fix'] || false,
        help: args['--help'] || false,
        version: args['--version'] || false,
        port: args['--port'] || 4949,
        ignore: args['--ignoreFolders'] || undefined,
        folderToImplode: args._[0],
    };
}


/**
 * Summary: cli is a funcion called from 'bin/implodeCss.js' that receives the
 * arguments given by the user, and makes all the function calls ordered
 * by these arguments.
 *
 * @param {object} rawArgs arguments directly given by the user.
 * @return {void}
 */
       async function cli(rawArgs) {
    let options;
    try {
        options = parseArgumentsIntoOptions(rawArgs);
    } catch (error) {
        exitCodes(400, rawArgs);
    }
    if (!options.help && !options.version) {
        options = await promptForMissingOptions(options);
        showOptions(options);
        await testPath(options.folderToImplode);
        if (options.audit) { // if the user wants to audit
            await auditCode(options.folderToImplode, options.port, options.ignore);
        } else if (options.fix) { // if the user wants to fix
            const answer = await confirm({
                message: 'Do you want to fix your data, please do a backup first?',
                default: true,
            });
            if (answer === true) { // if the user wants to continue
                await fixCode(options.folderToImplode, options.port);
            } else { // if the user cancelled the operation we will leave
                exitCodes(200);
            }
        }
    } else if (options.help) { // if the user specified help
        showHelp();
    } else if (options.version) { // if the user specified version
        showVersion();
    }
    // If the script hasn't stopped with any code, show a default exit output.
    // exitCodes(201);
}
